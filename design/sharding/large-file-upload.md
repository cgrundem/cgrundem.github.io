

Design an algorithm that uploads a massive file via REST to an API server.

I would use multi-part file upload.

The procedure would be as follows:

    1. The client send a request to the API server with metadata about the file, most importantly the md5 hash and file size.
    2. The API server responds with an upload id.
    3. The client starts uploading each file chunk to the API server, including the part number, size of the chunk, and md5 hash of the overall file, and the upload id.
    4. The API server validates the md5 hash and chunk size it stored earlier from the initial request, and if it matches, it stores the chunk and returns a unique id for the chunk. 
    5. The client sends a request to tell the server that the full upload is complete, which contains a list of each chunk's unique identifier generated by the API server.
    6. The API server validates the list of unique identifers against its' own and that there is no missing chunks, then fully assembles the file.

The chunks would need to be deleted from the server if the upload is interrupted. One way to do this is to set an expiration time on each chunk.

